########################################
# STOCK SCREENER - ENVIRONMENT EXAMPLE
# Copy this to .env and fill in your API keys
# Date: February 6, 2026
########################################

# Server Configuration
NODE_ENV=production
PORT=5000
HOST=0.0.0.0
ENABLE_ADB_REVERSE=false

# ========================================
# DATABASE CONFIGURATION (REQUIRED)
# ========================================
# Option A: Cloud/Postgres URL (Render/Neon/Railway/Supabase)
# Example: postgres://user:pass@host:5432/dbname
DATABASE_URL=

# Option B: Individual DB_* values (local development)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=stock_screener
DB_USER=postgres
DB_PASSWORD=your_postgres_password

# Enable SSL for hosted Postgres
DB_SSL=true

# ========================================
# FINTECH API KEYS CRITICAL FOR PRODUCTION
# ========================================

# Finnhub API Key (PRIMARY - Real-time stock data)
# ⭐ REQUIRED FOR PRODUCTION ⭐
# Get your FREE API key from: https://finnhub.io/register
# 
# FREE TIER LIMITS:
#   - 60 API calls/minute
#   - 250 calls/day
#   - Real-time quotes (15-min delay), news, fundamentals
#
# HOW TO GET YOUR KEY:
#   1. Go to https://finnhub.io/register
#   2. Create free account with valid email
#   3. Copy your API key from dashboard
#   4. Paste here: FINNHUB_API_KEY=your_actual_key
#   5. Restart backend: npm start
FINNHUB_API_KEY=your_finnhub_api_key_here

# ========================================
# MARKET DATA CONTROL FLAGS
# Determines data source behavior
# ========================================

# Use live market data from Finnhub (requires API key)
# false = Use mock data (no API key needed, good for testing)
# true = Use Finnhub API (production)
USE_LIVE_MARKET_DATA=true

# Allow fallback to mock data if Finnhub fails
# false = Return errors when API unavailable
# true = Gracefully fallback to mock data
USE_MOCK_DATA=true

# ========================================
# DEPRECATED APIS (DO NOT USE)
# These are listed for reference only - DO NOT use these APIs
# ========================================

# Alpha Vantage API (DEPRECATED - Use Finnhub instead)
ALPHA_VANTAGE_API_KEY=demo

# ========================================
# AI/LLM CONFIGURATION (REQUIRED)
# ========================================

# Groq API Key (Required for natural language queries)
# Converts user queries to SQL: "PE < 5" → WHERE pe_ratio < 5
#
# Get your FREE key from: https://console.groq.com/keys
#   1. Go to https://console.groq.com/login
#   2. Sign up with Google/GitHub
#   3. Click "API Keys" → "Create New API Key"
#   4. Copy the full gsk_* key
#   5. Paste here
GROQ_API_KEY=gsk_your_groq_api_key_here

# OpenAI API (OPTIONAL - for enhanced AI insights)
# Used for portfolio advisory if enabled
# Leave blank to skip
OPENAI_API_KEY=sk_your_openai_key_here

# ========================================
# RATE LIMITING (Controls API abuse)
# ========================================

# Rate limit window: 15 minutes
RATE_LIMIT_WINDOW_MS=900000

# Max requests in that window: 100
# Finnhub free: 60/min = 900/15min, we use 100 for margin
RATE_LIMIT_MAX_REQUESTS=100
# Disable Express rate limiter (only for controlled load tests)
DISABLE_RATE_LIMIT=false

# Finnhub specific limits
FINNHUB_RATE_LIMIT_CALLS_PER_MIN=60
FINNHUB_RATE_LIMIT_CALLS_PER_DAY=250

# ========================================
# DATA FRESHNESS THRESHOLDS
# Determines warning badge colors
# ========================================

# Fresh data: < 5 minutes (Green ✅)
FRESHNESS_THRESHOLD_FRESH_MINUTES=5

# Stale data: 5-60 minutes (Yellow ⏱️)
FRESHNESS_THRESHOLD_STALE_MINUTES=60

# Very stale: > 60 minutes (Red - Don't trade!)
FRESHNESS_THRESHOLD_VERY_STALE_MINUTES=1440

# ========================================
# REDIS CONFIGURATION (OPTIONAL)
# Caching for performance improvement
# App works without it (falls back to in-memory)
# ========================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=optional

# Cache time-to-live: 5 minutes
REDIS_CACHE_TTL_SECONDS=300

# ========================================
# BACKGROUND JOBS
# ========================================

# Alert re-evaluation: 1 hour
EVALUATION_INTERVAL_MS=3600000

# Health monitoring: 60 seconds
HEALTH_CHECK_INTERVAL_SECONDS=60

# ========================================
# LOGGING & DEBUG
# ========================================

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Verbose API logging
DEBUG_API_CALLS=false

# ========================================
# SECURITY
# ========================================

# CORS allowed origins
CORS_ORIGINS=http://localhost:5000,http://localhost:3000,http://10.0.2.2:5000

# Request timeout
REQUEST_TIMEOUT_MS=30000

# Max payload size
MAX_REQUEST_SIZE=10mb
